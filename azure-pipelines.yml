trigger:
  branches:
    include:
      - dev
      - main

pool:
  name: default

steps:

# 1️⃣ Set dynamic releaseName and namespace based on branch
- script: |
    if [ "$(Build.SourceBranchName)" == "dev" ]; then
      echo "##vso[task.setvariable variable=releaseName]app-dev"
      echo "##vso[task.setvariable variable=namespace]dev"
    else
      echo "##vso[task.setvariable variable=releaseName]app-prod"
      echo "##vso[task.setvariable variable=namespace]prod"
    fi
  displayName: 'Set releaseName and namespace dynamically'

# 2️⃣ Debug (verify variables)
- script: |
    echo "releaseName=$(releaseName)"
    echo "namespace=$(namespace)"
  displayName: 'Debug variables'




